(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(44)},39:function(e,t,a){},42:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),r=a(19),l=a.n(r),c=a(15),s=a(5),u=a(6),i=a(8),m=a(7),k=a(9),b=a(48),d=a(47),h=a(45),p=a(16),v="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var E={Accept:"application/json",Authorization:f},g=function(e,t){return fetch("".concat(v,"/books/").concat(e.id),{method:"PUT",headers:Object(p.a)({},E,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},y=function(e){return fetch("".concat(v,"/search"),{method:"POST",headers:Object(p.a)({},E,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},N=function(e){var t=e.book,a=e.bulkMove,o=e.updateChecked,r=e.updateBook,l=t.imageLinks?n.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(t.imageLinks.thumbnail,'")')}}):"";return n.a.createElement(n.a.Fragment,null,n.a.createElement("li",null,n.a.createElement("div",null,n.a.createElement("div",{className:"book"},n.a.createElement("div",{className:"book-top"},l,n.a.createElement("div",{className:"book-shelf-changer"},n.a.createElement("select",{onChange:function(e){return r(e.target.value,t)},defaultValue:t.shelf||"none"},n.a.createElement("option",{value:"move",disabled:!0},"Move to..."),n.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),n.a.createElement("option",{value:"wantToRead"},"Want to Read"),n.a.createElement("option",{value:"read"},"Read"),n.a.createElement("option",{value:"none"},"None")))),n.a.createElement("div",{className:"book-title"},t.title),n.a.createElement("div",{className:"book-authors"},t.authors||null),t.shelf&&"none"!==t.shelf&&n.a.createElement(h.a,{to:"/book?id=".concat(t.id)},n.a.createElement("button",{className:"btn-primary"},"View Book")),a&&n.a.createElement("input",{type:"checkbox",name:"move",id:"move",onChange:function(){return o(t.id)},className:"book-checkbox"})))))},j=a(20),C=a.n(j),O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={books:[],book:{}},a}return Object(k.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("books"),t=[];e?t=JSON.parse(e):(localStorage.setItem("books",JSON.stringify(this.props.books)),t=this.props.books);var a=C.a.parse(window.location.search).id,o=t.filter(function(e){return e.id===a})[0];this.setState({book:o})}},{key:"render",value:function(){var e=this.state.book,t=e.imageLinks?n.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(e.imageLinks.thumbnail,'")')}}):null;return n.a.createElement(n.a.Fragment,null,n.a.createElement(h.a,{className:"close-search",to:"/"},"Close"),n.a.createElement("div",{className:"book-about-container"},t,n.a.createElement("div",{className:"book-about-content"},n.a.createElement("h1",{className:"book-about-title"},e.title),n.a.createElement("h2",{className:"book-about-subtitle"},e.subtitle),n.a.createElement("p",null,n.a.createElement("em",null,e.publisher)),n.a.createElement("p",null,e.pageCount?"Page count: ".concat(e.pageCount):null),n.a.createElement("p",null,e.ratingsCount?"Rating: ".concat(e.ratingsCount):null),n.a.createElement("p",{className:"book-about-description"},e.description?e.description:null),n.a.createElement("button",{className:"btn-primary btn-primary-large",onClick:function(){return window.open(e.previewLink)}},"Preview"))))}}]),t}(o.Component),S=function(e){var t=e.bookshelf,a=e.children,o=e.moveMultiple,r=e.bulkMove,l=e.updateAllShelves;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"bookshelf"},n.a.createElement("h2",{className:"bookshelf-title"},t),n.a.createElement("button",{className:"btn-secondary",onClick:o},"Bulk Move"),r&&n.a.createElement("select",{className:"bookshelf-bulk-select",onChange:function(e){return l(e.target.value)},defaultValue:"none"},n.a.createElement("option",{value:"move",disabled:!0},"Move to..."),n.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),n.a.createElement("option",{value:"wantToRead"},"Want to Read"),n.a.createElement("option",{value:"read"},"Read"),n.a.createElement("option",{value:"none"},"None")),n.a.createElement("div",{className:"bookshelf-books"},n.a.createElement("ol",{className:"books-grid"},a))))},w=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={query:"",books:[]},a.searchBooks=function(e){var t=a.props.shelvedBooks;a.setState({query:e}),e&&y(e).then(function(e){e.error?a.setState({books:{}}):(e=a.compareArrays(e,t),a.setState({books:e}))}).catch(function(e){return console.log("error",e)})},a}return Object(k.a)(t,e),Object(u.a)(t,[{key:"compareArrays",value:function(e,t){return e.forEach(function(e){return t.forEach(function(t){e.id===t.id&&(e.shelf=t.shelf)})}),e}},{key:"render",value:function(){var e=this,t=this.state,a=t.query,o=t.books,r=this.props.updateBook,l=null;return 0!==Object.keys(o).length&&o.constructor!==Object&&(l=this.state.books.map(function(e,t){return n.a.createElement(N,{key:t,book:e,updateBook:r})})),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"search-books"},n.a.createElement("div",{className:"search-books-bar"},n.a.createElement(h.a,{className:"close-search",to:"/"},"Close"),n.a.createElement("div",{className:"search-books-input-wrapper"},n.a.createElement("input",{onChange:function(t){return e.searchBooks(t.target.value)},type:"text",value:a,placeholder:"Search by title or author"}))),n.a.createElement("div",{className:"search-books-results"},n.a.createElement("ol",{className:"books-grid"},a&&!o.error&&l))))}}]),t}(o.Component),B=(a(39),function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={bookshelves:[{title:"Currently Reading"},{title:"Want to Read"},{title:"Read"}],books:[],bulkMove:!1,checkedBooks:[]},a.updateBook=function(e,t){var o=t;o.shelf=e,g(o,e),a.setState(function(e){return{books:e.books.filter(function(e){return e.title!==o.title}).concat([o])}}),localStorage.removeItem("books")},a.moveMultiple=function(){a.setState(function(e){return{bulkMove:!e.bulkMove}})},a.updateChecked=function(e){var t=a.state.books.filter(function(t){return t.id===e});t[0].checked=!0;var o=[].concat(Object(c.a)(t),Object(c.a)(a.state.checkedBooks));a.setState({checkedBooks:o})},a.updateAllShelves=function(e){a.state.checkedBooks.map(function(t){return a.updateBook(e,t)}),a.setState({checkedBooks:[],bulkMove:!1})},a}return Object(k.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(v,"/books"),{headers:E}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(t){return e.setState({books:t})})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"app"},n.a.createElement(b.a,null,n.a.createElement(d.a,{exact:!0,path:"/book",render:function(){return n.a.createElement(O,{books:e.state.books})}}),n.a.createElement(d.a,{exact:!0,path:"/search",render:function(){return n.a.createElement(w,{shelvedBooks:e.state.books,updateBook:e.updateBook})}}),n.a.createElement(d.a,{exact:!0,path:"/",render:function(){return n.a.createElement("div",{className:"list-books"},n.a.createElement("div",{className:"list-books-title"},n.a.createElement("h1",null,"MyReads")),n.a.createElement("div",{className:"list-books-content"},n.a.createElement("div",null,e.state.bookshelves.map(function(t,a){return n.a.createElement(S,{key:a,bookshelf:t.title,moveMultiple:e.moveMultiple,bulkMove:e.state.bulkMove,updateAllShelves:e.updateAllShelves},e.state.books.map(function(a,o){return a.shelf.toLowerCase()===t.title.split(" ").join("").toLowerCase()?n.a.createElement(N,{key:o,book:a,updateBook:e.updateBook,updateChecked:e.updateChecked,bulkMove:e.state.bulkMove}):null}))}))),n.a.createElement("div",{className:"open-search"},n.a.createElement(h.a,{to:"/search"},"Add a book")))}})))}}]),t}(n.a.Component)),M=(a(42),a(46));l.a.render(n.a.createElement(M.a,null,n.a.createElement(B,null)),document.getElementById("root"))}},[[22,2,1]]]);
//# sourceMappingURL=main.273e366c.chunk.js.map